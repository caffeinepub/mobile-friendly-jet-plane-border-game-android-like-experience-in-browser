@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        --radius: 0.75rem;
        
        /* Arcade Orange/Red Theme - Light Mode */
        --background: 0.98 0.01 40;
        --foreground: 1 0 0;
        --card: 1 0 0;
        --card-foreground: 1 0 0;
        --popover: 1 0 0;
        --popover-foreground: 1 0 0;
        --primary: 0.25 0.02 30;
        --primary-foreground: 0.98 0.01 40;
        --secondary: 0.92 0.01 40;
        --secondary-foreground: 0.25 0.02 30;
        --muted: 0.95 0.01 40;
        --muted-foreground: 1 0 0;
        --accent: 0.92 0.01 40;
        --accent-foreground: 1 0 0;
        --destructive: 0.55 0.22 25;
        --destructive-foreground: 0.98 0.01 40;
        --border: 0.88 0.01 40;
        --input: 0.88 0.01 40;
        --ring: 0.65 0.15 35;
        
        /* Game-specific colors */
        --game-primary: 0.58 0.20 35;
        --game-primary-hover: 0.52 0.22 30;
        --game-secondary: 0.48 0.18 15;
        --game-secondary-hover: 0.42 0.20 10;
        --game-accent: 0.68 0.18 45;
        --game-border: 0.55 0.20 35;
        --game-field: 0.15 0.03 30;
        --game-text-secondary: 1 0 0;
        
        /* Safe area insets for mobile devices with notches/home indicators */
        --safe-area-inset-top: env(safe-area-inset-top, 0px);
        --safe-area-inset-right: env(safe-area-inset-right, 0px);
        --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
        --safe-area-inset-left: env(safe-area-inset-left, 0px);
        
        /* Mobile-compact scaling system - default (desktop/tablet) */
        --compact-hud-padding-x: 0.75rem;
        --compact-hud-padding-y: 0.375rem;
        --compact-hud-gap: 0.75rem;
        --compact-hud-font-size: 0.875rem;
        --compact-hud-font-size-small: 0.75rem;
        --compact-progress-height: 0.5rem;
        --compact-control-size: 3.5rem;
        --compact-control-icon-size: 1.5rem;
        --compact-control-inset: 0.5rem;
        --compact-overlay-title: 2rem;
        --compact-overlay-text: 1rem;
        --compact-overlay-spacing: 1rem;
        --compact-overlay-padding: 1rem;
        --compact-border-width: 3px;
        --compact-corner-size: 1rem;
        --compact-grid-size: 30px;
    }

    .dark {
        /* Arcade Orange/Red Theme - Dark Mode */
        --background: 0.12 0.03 30;
        --foreground: 1 0 0;
        --card: 0.18 0.03 30;
        --card-foreground: 1 0 0;
        --popover: 0.18 0.03 30;
        --popover-foreground: 1 0 0;
        --primary: 0.88 0.01 40;
        --primary-foreground: 0.18 0.03 30;
        --secondary: 0.25 0.03 30;
        --secondary-foreground: 1 0 0;
        --muted: 0.25 0.03 30;
        --muted-foreground: 1 0 0;
        --accent: 0.35 0.05 35;
        --accent-foreground: 1 0 0;
        --destructive: 0.65 0.20 25;
        --destructive-foreground: 0.18 0.03 30;
        --border: 0.25 0.03 30;
        --input: 0.25 0.03 30;
        --ring: 0.55 0.15 35;
        
        /* Game-specific colors - Dark Mode */
        --game-primary: 0.62 0.22 35;
        --game-primary-hover: 0.68 0.24 35;
        --game-secondary: 0.52 0.20 15;
        --game-secondary-hover: 0.58 0.22 15;
        --game-accent: 0.72 0.20 45;
        --game-border: 0.60 0.22 35;
        --game-field: 0.08 0.04 30;
        --game-text-secondary: 1 0 0;
    }
    
    /* Mobile-compact mode for small landscape screens */
    @media (max-width: 640px) and (orientation: landscape) {
        :root, .dark {
            --compact-hud-padding-x: 0.375rem;
            --compact-hud-padding-y: 0.25rem;
            --compact-hud-gap: 0.5rem;
            --compact-hud-font-size: 0.625rem;
            --compact-hud-font-size-small: 0.5625rem;
            --compact-progress-height: 0.375rem;
            --compact-control-size: 2.75rem;
            --compact-control-icon-size: 1.125rem;
            --compact-control-inset: 0.375rem;
            --compact-overlay-title: 1.25rem;
            --compact-overlay-text: 0.75rem;
            --compact-overlay-spacing: 0.5rem;
            --compact-overlay-padding: 0.75rem;
            --compact-border-width: 2px;
            --compact-corner-size: 0.625rem;
            --compact-grid-size: 20px;
        }
    }

    * {
        @apply border-border;
    }
    
    body {
        @apply bg-background text-foreground;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
    
    h1, h2, h3, h4, h5, h6 {
        font-family: 'Impact', 'Arial Black', sans-serif;
        letter-spacing: 0.05em;
        text-transform: uppercase;
    }
}

@layer utilities {
    /* Game-specific shadow utilities */
    .shadow-game-button {
        box-shadow: 0 4px 14px 0 oklch(0.58 0.20 35 / 0.39);
    }
    
    .shadow-game-button-hover {
        box-shadow: 0 6px 20px oklch(0.58 0.20 35 / 0.5);
    }
    
    /* Safe area utilities for virtual controls - compact mode aware */
    .safe-bottom {
        bottom: calc(var(--compact-control-inset) + var(--safe-area-inset-bottom));
    }
    
    .safe-left {
        left: calc(var(--compact-control-inset) + var(--safe-area-inset-left));
    }
    
    .safe-right {
        right: calc(var(--compact-control-inset) + var(--safe-area-inset-right));
    }
}

/* Spark effect animations for obstacles */
@keyframes sparkFlicker {
    0%, 100% {
        opacity: 0.3;
        transform: scaleY(0.8);
    }
    50% {
        opacity: 1;
        transform: scaleY(1.2);
    }
}

@keyframes sparkPulse {
    0%, 100% {
        opacity: 0.4;
        transform: scale(1);
    }
    50% {
        opacity: 0.8;
        transform: scale(1.15);
    }
}

/* Spark burst animations for impacts */
@keyframes sparkBurstStreak {
    0% {
        opacity: 1;
        transform: scaleY(0) translateY(0);
    }
    30% {
        opacity: 1;
        transform: scaleY(1.5) translateY(-8px);
    }
    100% {
        opacity: 0;
        transform: scaleY(0.5) translateY(-16px);
    }
}

@keyframes sparkBurstStreakBoss {
    0% {
        opacity: 1;
        transform: scaleY(0) translateY(0);
    }
    30% {
        opacity: 1;
        transform: scaleY(1.8) translateY(-12px);
    }
    100% {
        opacity: 0;
        transform: scaleY(0.5) translateY(-24px);
    }
}

@keyframes sparkBurstFlash {
    0% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(0.5);
    }
    20% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1.5);
    }
    100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.3);
    }
}

@keyframes sparkBurstFlashBoss {
    0% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(0.5);
    }
    20% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(2);
    }
    100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.3);
    }
}

@keyframes sparkBurstGlow {
    0% {
        opacity: 0.8;
        transform: translate(-50%, -50%) scale(0.8);
    }
    50% {
        opacity: 0.4;
        transform: translate(-50%, -50%) scale(1.2);
    }
    100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(1.5);
    }
}

/* Apply animations to spark burst elements */
.spark-burst-streak {
    animation: sparkBurstStreak 0.4s ease-out forwards;
}

.spark-burst-streak.spark-burst-boss,
.spark-burst-streak.spark-burst-player {
    animation: sparkBurstStreakBoss 0.6s ease-out forwards;
}

.spark-burst-flash {
    animation: sparkBurstFlash 0.4s ease-out forwards;
}

.spark-burst-flash.spark-burst-flash-boss {
    animation: sparkBurstFlashBoss 0.6s ease-out forwards;
}

.spark-burst-glow {
    animation: sparkBurstGlow 0.5s ease-out forwards;
}

/* White progress bar override - scoped to game overlay */
.white-progress-bar [data-state="complete"],
.white-progress-bar [data-state="loading"],
.white-progress-bar > div {
    background-color: oklch(1 0 0) !important;
}

/* Ensure white fill in both light and dark modes */
:root .white-progress-bar [data-state="complete"],
:root .white-progress-bar [data-state="loading"],
:root .white-progress-bar > div,
.dark .white-progress-bar [data-state="complete"],
.dark .white-progress-bar [data-state="loading"],
.dark .white-progress-bar > div {
    background-color: oklch(1 0 0) !important;
}
